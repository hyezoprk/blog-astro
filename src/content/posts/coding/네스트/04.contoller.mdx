---
title: μ»¨νΈλ΅¤λ¬
date: '2023-11-15'
categories: coding
tags: "λ„¤μ¤νΈ"
description: "04"
---
<HeadingNavigator />

### μ»¨νΈλ΅¤λ¬
- μ»¨νΈλ΅¤λ¬λ” ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ μμ‹ ν•λ” κ΄€μ νƒ‘μ΄λ‹¤.
- ν΄λΌμ΄μ–ΈνΈκ°€ μ–΄λ””λ΅ μ”μ²­μ„ λ³΄λ‚Όμ§€, `Endpoint`λ¥Ό `Method` λ³„λ΅ μ •μν•λ‹¤.
  - NestJSμ—μ„ μ κ³µν•λ” Method λ°μ½”λ μ΄ν„°(@GET, @POST, @PATCH...)λ¥Ό λ¶λ¬μ¨λ‹¤
  - ν•΄λ‹Ή λ°μ½”λ μ΄ν„°μ— λ„£λ” κ°’μ€ μ„Έλ¶€ μ—”λ“ν¬μΈνΈκ°€ λλ‹¤.
  - λ¨λ“  μ—”λ“ν¬μΈνΈμ— μ ‘λ‘μ–΄, κ³µν†µλ κ²½λ΅λ¥Ό λ¶€μ—¬ν•λ ¤λ©΄ μ»¨νΈλ΅¤λ¬ λ°μ½”λ μ΄ν„°λ¥Ό μ΄μ©ν•λ‹¤.
  - μ΄ λ‘μ μ΅°ν•©μΌλ΅ κ²½λ΅κ°€ μ™„μ„±λλ‹¤.
  - κµ¬λΉ„ν•΄λ‘” κ²½λ΅μ™€ λ©”μ†λ“λ΅ μ”μ²­μ΄ λ“¤μ–΄μ¤λ©΄ ν•΄λ‹Ή ν•¨μκ°€ μ‹¤ν–‰λλ‹¤.
  ```ts posts.controller.ts
  @Controller('posts')
  export class PostsController {
    // '/posts'λ΅ λ³΄λ‚΄λ” Get μ”μ²­
    @GET()
    getAllPosts(){
      return somethingPostJson;
    }
  }
  ```
<br/>

μ΄ μ”μ²­μ— λ€ν• ν•¨μμ λ¦¬ν„΄κ°’μ΄ μ‘λ‹µμΌλ΅ λ‚κ°„λ‹¤.  
κ·Έλ¦¬κ³  NestJS μ•„ν‚¤ν…μ³λ” μ΄λ•μ μ‘λ‹µ λ΅μ§μ„ `Service`μ—μ„ μ‘μ„±ν•λ„λ΅ κ¶μ¥ν•κ³  μλ‹¤. cliλ΅ λ¨λ“μ„ λ§λ“¤ λ• μ„λΉ„μ¤κ°€ μ €μ λ΅ μ£Όμ…λμ–΄ μλ” μ΄μ λ‹¤.  
λ¬Όλ΅  μ»¨νΈλ΅¤λ¬μ—μ„ λ΅μ§μ„ μ‘μ„±ν•΄λ„ κ²°κ³Όλ” κ°™λ‹¤. ν•μ§€λ§ κ·Έ κ²½μ° κΈΈμ–΄μ§„ μ½”λ“λ“¤λ΅ μ»¨νΈλ΅¤λ¬κ°€ μ§€μ €λ¶„ν•΄μ§„λ‹¤. μ»¨νΈλ΅¤λ¬κ°€ κ΄€λ¬ΈμΈ λ§νΌ κ°€λ…μ„±μ„ μ±™κΈΈμλ΅ μΆ‹λ‹¤. κ²λ‹¤κ°€ μ„λΉ„μ¤λ¥Ό λ¶„λ¦¬ν•¨μΌλ΅μ¨ μ½”λ“μ μ¬μ‚¬μ©μ„±λ„ λ†’μ•„μ§€λ‹ κµ³μ΄ λ‚λ„μ§€ μ•μ„ μ΄μ κ°€ μ—†λ‹¤.

### νλΌλ―Έν„° λ°μ½”λ μ΄ν„°
κ·ΈλΌ μ„λΉ„μ¤λ΅ μ–΄λ–¤ μ •λ³΄λ“¤μ„ λ„κ²¨μ¤μ•Ό ν• κΉ?  
ν΄λΌμ΄μ–ΈνΈμ—μ„ λ°›μ•„λ‚΄λ” μ •λ³΄λ” ν¬κ² μ„Έ κ°€μ§€λ΅ λ‚λ λ³Ό μ μλ‹¤.  
- `URL`μ— λ‹΄κ²¨μ¤λ” λ¶€λ¶„
  - ν¨μ¤ νλΌλ―Έν„°
  - μΏΌλ¦¬ νλΌλ―Έν„°
- `Body`μ— λ‹΄κ²¨μ¤λ” λ¶€λ¶„
  - νΌ λ°μ΄ν„°
  - νμΌ
- `Header`μ— λ‹΄κ²¨μ¤λ” λ¶€λ¶„
  - μΈμ¦ ν† ν°(JWT), μΏ ν‚¤ λ“±
<br/>
NestJSλ” λ‹¤μ–‘ν• λ°μ½”λ μ΄ν„°λ΅ μ—¬κΈ°μ— μ ‘κ·Ό, μ„λΉ„μ¤λ΅ μ „λ‹¬ν•  μ μλ‹¤.  
<br/>
1. @Param()
  - <b>ν¨μ¤ νλΌλ―Έν„°</b>λ¥Ό λ°›λ” λ°μ½”λ μ΄ν„°λ‹¤.
  - νΉμ •κ°’μ„ λ„£μ§€ μ•μΌλ©΄ μ „μ²΄ ν¨μ¤ νλΌλ―Έν„°λ¥Ό μ¤λΈμ νΈλ΅ λ°›λ”λ‹¤.
  - μμ  μ½”λ“
    <CH.Scrollycoding>
    1. ν¨μ¤ νλΌλ―Έν„° μ‹λ³„ν•κΈ°
    ```ts posts.controller.ts

       
    @Controller('posts')
    export class PostsController {
      // focus[7:17]
      @GET(':postId') 
      getPosts(){
        return this.postsService.somethingMethod();
      }
    }
    β£
    β£
    ```
    ---
    2. @Param() λ°μ½”λ μ΄ν„°λ΅ λ°›κΈ°
    ```ts posts.controller.ts
    @Controller('posts')
    export class PostsController {
      @GET(':postId') 
      getPosts(
        // focus
        @Param('postId') id: string;
      ){
        return this.postsService.somethingMethod();
      }
    }
    ```
    ---
    3. μ„λΉ„μ¤ λ΅μ§μ— λ„κΈ°κΈ°
    ```ts posts.controller.ts
    @Controller('posts')
    export class PostsController {
      @GET(':postId') 
      getPosts(
        @Param('postId') id: string;
      ){
        // focus
        return this.postsService.somethingMethod(+id);
      }
    }
    ```
    </CH.Scrollycoding>
<br/>    
2. @Query()
- <b>μΏΌλ¦¬ νλΌλ―Έν„°</b>λ¥Ό λ°›λ”λ‹¤.
- νΉμ •κ°’μ„ λ„£μ§€ μ•μΌλ©΄ μ „μ²΄ μΏΌλ¦¬ νλΌλ―Έν„°λ¥Ό μ¤λΈμ νΈλ΅ λ°›λ”λ‹¤.
- κ°€λ Ή '/posts?page=1&order=desc'μ—μ„ μΏΌλ¦¬λ” `page`μ™€ `order`λ‹¤.
- μμ  μ½”λ“
  ```ts posts.controller.ts
  @Controller('posts')
  export class PostsController {
    @Get()
    async getPosts(
      @Qyery() query: {page: string, order: string},
    ) {
      return this.postsService.getPosts(qeury);
    }
  }
  ```
<br/>  

3. @Body()
- <b>νΌ λ°μ΄ν„°</b>λ¥Ό λ°›λ” λ°μ½”λ μ΄ν„°λ‹¤.
- νΉμ •κ°’μ„ λ„£μ§€ μ•μΌλ©΄ μ „μ²΄ λ°”λ””λ¥Ό μ¤λΈμ νΈλ΅ λ°›λ”λ‹¤.
- μμ  μ½”λ“
  ```ts posts.controller.ts
  @Controller('posts')
  export class PostsController {
    @Post()
    postPost(
      @Body() body: {title: string, content: string},
    ){
      return this.postsService.createPost(qeury);
    }
  }
  ```
<br/>  

4. @Headers()
- <b>ν—¤λ”(λ©”νƒ€λ°μ΄ν„°)</b>λ¥Ό λ°›λ” λ°μ½”λ μ΄ν„°λ‹¤.
- λ€ν‘μ μΌλ΅ `authorization`μ„ λ°›λ”λ‹¤.
- μμ  μ½”λ“
  ```ts posts.controller.ts
  @Controller('posts')
  export class PostsController {
    @Post()
    loginEmail(
      @Headers('authorization') rawToken: string
    ){
      return this.authService.loginWithEmail(rawToken);
    }
  }
  ```
<br/>  


5. @Request()
- <b>λ¦¬ν€μ¤νΈ κ°μ²΄</b>λ¥Ό λ°›λ” λ°μ½”λ μ΄ν„°λ‹¤.
- λ‚μ¤‘μ—λ” μ»¤μ¤ν…€ λ°μ½”λ μ΄ν„°λ¥Ό λ§λ“¤μ–΄μ„ ν•„μ”ν• κ°’λ§ μ „μ©μΌλ΅ λΉΌμ¬ λ•κ°€ λ§λ‹¤.
- μμ  μ½”λ“
  ```ts posts.controller.ts
  @Controller('posts')
  export class PostsController {
    @Post()
    loginEmail(
      @Request() req: Request & {user: UserModel}
    ){
      return this.authService.loginWithEmail(rawToken);
    }
  }
  ```
<br/>  
---
<br/>  
μ΄ μ •λ„κ°€ μ»¨νΈλ΅¤λ¬κ°€ μν–‰ν•λ” κΈ°λ³Έ μ—­ν• μ΄λ‹¤. μ¶”κ°€μ μΌλ΅ `Pipe`, `Interception`, `Guard`, `DTO` λ“±μ΄ μ‚¬μ©λλ” κ³³λ„ λ°”λ΅ μ»¨νΈλ΅¤λ¬μΈλ°, μ΄λ” κ°κ°μ„ λ‹¤λ£¨λ” μ§€λ©΄μ—μ„ μμ„Έν λ‹¤λ¤„λ³΄λ ¤κ³  ν•λ‹¤.  
<br/>
ν¬λΉ„ μ»¨ν‹°λ‰΄ π’
<br/>
#### μ°Έκ³ λ§ν¬
- [NestJS κ³µμ‹λ¬Έμ„](https://docs.nestjs.com/)